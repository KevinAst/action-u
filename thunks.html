
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Thunk Action Creators Â· action-u</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        <meta name="author" content="Kevin J. Bridges <kevinast@gmail.com> (https://github.com/KevinAst)">
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="api.html" />
    
    
    <link rel="prev" href="default.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">action-u (0.2.0)</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="start.html">
            
                <a href="start.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <span>
            
                    
                    Concepts ...
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="basics.html">
            
                <a href="basics.html">
            
                    
                    Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="formalTypes.html">
            
                <a href="formalTypes.html">
            
                    
                    A Closer Look
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="shapes.html">
            
                <a href="shapes.html">
            
                    
                    ActionStruct Shapes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="validation.html">
            
                <a href="validation.html">
            
                    
                    Parameter Validation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="default.html">
            
                <a href="default.html">
            
                    
                    Defaulting Parameters
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.1.6" data-path="thunks.html">
            
                <a href="thunks.html">
            
                    
                    Thunk Action Creators
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="api.html">
            
                <a href="api.html">
            
                    
                    API Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="api.html">
            
                <a href="api.html#generateActions">
            
                    
                    generateActions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="api.html">
            
                <a href="api.html#generateActions_root">
            
                    
                    generateActions.root
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" >
            
                <span>
            
                    
                    Meta Inputs ...
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.3.1" data-path="api.html">
            
                <a href="api.html#ActionGenesis">
            
                    
                    ActionGenesis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3.2" data-path="api.html">
            
                <a href="api.html#ActionMeta">
            
                    
                    ActionMeta
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3.3" data-path="api.html">
            
                <a href="api.html#ratifyFn">
            
                    
                    ratifyFn
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.4" >
            
                <span>
            
                    
                    Run-Time Outputs ...
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.4.1" data-path="api.html">
            
                <a href="api.html#ActionStruct">
            
                    
                    ActionStruct
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4.2" data-path="api.html">
            
                <a href="api.html#ActionNode">
            
                    
                    ActionNode
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <span>
            
                    
                    Organization ...
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="promotion.html">
            
                <a href="promotion.html">
            
                    
                    Action Promotion
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1.1" data-path="promotion.html">
            
                <a href="promotion.html#single-module">
            
                    
                    Single Module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.1.2" data-path="promotion.html">
            
                <a href="promotion.html#multiple-modules">
            
                    
                    Multiple Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.1.3" data-path="promotion.html">
            
                <a href="promotion.html#hybrid">
            
                    
                    Hybrid
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="actionDoc.html">
            
                <a href="actionDoc.html">
            
                    
                    Action Documentation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="dist.html">
            
                <a href="dist.html">
            
                    
                    Distribution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="why.html">
            
                <a href="why.html">
            
                    
                    Why action-u?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="history.html">
            
                <a href="history.html">
            
                    
                    Revision History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="LICENSE.html">
            
                <a href="LICENSE.html">
            
                    
                    MIT License
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Thunk Action Creators</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="thunk-action-creators">Thunk Action Creators</h1>
<p>A popular technique to inject business logic into redux-enabled apps
are thunks.  <a href="https://github.com/gaearon/redux-thunk" target="_blank">Thunks</a> provide
a mechanism to dispatch actions in either a delayed or conditional
manor.  Typically they are used in conjunction with asynchronous
processes, such as a server fetch, etc.</p>
<p>Thunks are introduced by promoting an action that is a function
<em>rather than an action object</em>.  In other words, the action creator
returns a function (i.e. the thunk), that is managed by the redux
thunk middleware.</p>
<ul>
<li>A thunk action creator accepts the app-specific contextual business
parameters <em>(just like all action creators)</em></li>
<li>and when invoked returns a function (i.e. the thunk)<ul>
<li>that will in turn be invoked by the redux thunk middleware</li>
<li>passing (dispatch, getState) parameters</li>
<li>giving the thunk access to both:<ul>
<li>the contextual business parameters (through closure)</li>
<li>and the redux state and dispatch mechanisms</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="thunks-in-action-u">Thunks in action-u</h2>
<p>Within action-u, thunk action creators are injected into the
<a href="api.html#ActionStruct"><code>ActionStruct</code></a> using the <a href="api.html#ActionMeta"><code>actionMeta.thunk</code></a>
property.</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> {generateActions} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;action-u&apos;</span>;

<span class="hljs-keyword">const</span> actions = generateActions({

  widget: {

    fetch: {      <span class="hljs-comment">// widget.fetch(selCrit)</span>
                  actionMeta: {
                    thunk(selCrit) {
                      <span class="hljs-keyword">return</span> (dispatch, getState) =&gt; {
                        <span class="hljs-keyword">return</span> fetchWidget(selCrit) <span class="hljs-comment">// ... promise-based async fetch </span>
                          .then( widget =&gt; {
                            dispatch(actions.widget.fetch.complete(widget));
                          })
                          .catch ( err =&gt; {
                            dispatch(actions.widget.fetch.fail(err));
                          });
                      };
                    }
                  },

      complete: { <span class="hljs-comment">// widget.fetch.complete(widget)</span>
                  actionMeta: {
                    traits: [<span class="hljs-string">&apos;widget&apos;</span>]
                  }
      },

      fail: {     <span class="hljs-comment">// widget.fetch.fail(err)</span>
                  actionMeta: {
                    traits: [<span class="hljs-string">&apos;err&apos;</span>]
                  }
      }
    }
  }
});
</code></pre>
<p>The <a href="api.html#ActionMeta"><code>actionMeta.thunk</code></a> property represents the <strong>fully
implemented</strong> action creator function, and is directly injected into
the <a href="api.html#ActionStruct"><code>ActionStruct</code></a> as an <a href="api.html#ActionNode"><code>ActionNode</code></a>.  In other
words, there is <strong>NO generation</strong> <em>(in this case)</em>, rather the entire
action creator is fully defined by app-specific code.  This merely
allows thunk action creators to co-exist with all other <em>generated</em>
action creators in the <a href="api.html#ActionStruct"><code>ActionStruct</code></a>.  As a result,
<strong><em>when a thunk is used, no other <a href="api.html#ActionMeta"><code>actionMeta</code></a> properties
are allowed</em></strong>.</p>
<p><strong>Note 1</strong>: Technically, a thunk is the function returned from a thunk
action creator, not the action creator itself.  With that said, we
simplify our terminology by using the <a href="api.html#ActionMeta"><code>actionMeta.thunk</code></a>
property to refer to the thunk action creator.</p>
<p><strong>Note 2</strong>: In reality, you can do anything in your app-defined thunk
action creator.  In other words, action-u provides no validation of
what your action creator does <em>(i.e. returns)</em>, rather it merely
injects it into the <a href="api.html#ActionStruct"><code>ActionStruct</code></a> <em>as an
<a href="api.html#ActionNode"><code>ActionNode</code></a></em>.  By design, it is intended to return a thunk
<em>(function)</em>, but nothing prevents it from returning, say an action
object <em>(you probably wouldn&apos;t do this, as it defeats the purpose of
auto generating your action creators)</em>.</p>
<h2 id="thunk-modules">Thunk Modules</h2>
<p>Because thunks typically contain several lines of code, it is common
to pull them in through a separate module.  Here is the same example
<em>(from above)</em>:</p>
<ul>
<li><p><strong>actions/thunks/widgetFetch.js</strong></p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> actions <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;../../actions&apos;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">widgetFetch</span>(<span class="hljs-params">selCrit</span>) </span>{
  <span class="hljs-keyword">return</span> (dispatch, getState) =&gt; {
    <span class="hljs-keyword">return</span> fetchWidget(selCrit) <span class="hljs-comment">// ... promise-based async fetch </span>
      .then( widget =&gt; {
        dispatch(actions.widget.fetch.complete(widget));
      })
      .catch ( err =&gt; {
        dispatch(actions.widget.fetch.fail(err));
      });
  };
}
</code></pre>
</li>
<li><p><strong>actions/index.js</strong></p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> {generateActions} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;action-u&apos;</span>;
<span class="hljs-keyword">import</span> widgetFetch       <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./thunks/widgetFetch&apos;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> generateActions({

  widget: {

    fetch: {      <span class="hljs-comment">// widget.fetch(selCrit)</span>
                  actionMeta: {
                    thunk: widgetFetch
                  },

      complete: { <span class="hljs-comment">// widget.fetch.complete(widget)</span>
                  actionMeta: {
                    traits: [<span class="hljs-string">&apos;widget&apos;</span>]
                  }
      },

      fail: {     <span class="hljs-comment">// widget.fetch.fail(err)</span>
                  actionMeta: {
                    traits: [<span class="hljs-string">&apos;err&apos;</span>]
                  }
      }
    }
  }
});
</code></pre>
</li>
</ul>
<h2 id="sidebar-thunk-alternatives">SideBar: Thunk Alternatives</h2>
<p>Thunks are merely <strong>one way to inject business logic</strong> into your
redux-enabled application ... <strong>there are other techniques</strong>!</p>
<p>Thunk support was added to action-u simply to allow thunk action
creators to consistently co-exist in the action-u ActionStruct <em>along
with all other action creators</em>.</p>
<p>I would encourage you to investigate the alternatives to thunks.  This
article breaks down the various options: <strong><em><a href="https://medium.com/@jeffbski/where-do-i-put-my-business-logic-in-a-react-redux-application-9253ef91ce1" target="_blank">Where do I put my
business logic in a React-Redux
application?</a></em></strong>
The article is an introduction (and motivation) for the development of
<strong><em><a href="https://github.com/jeffbski/redux-logic" target="_blank">redux-logic</a></em></strong>
... <em>redux middleware for organizing all your business logic</em>.</p>
<p>I have been using
<strong><a href="https://github.com/jeffbski/redux-logic" target="_blank">redux-logic</a></strong> since it&apos;s
begining and believe it is the <strong><em>best approach to encapsulate your
business logic</em></strong>. Prior to redux-logic, my business logic was spread
out in a variety of different places, including:</p>
<ul>
<li>component methods</li>
<li>thunks</li>
<li>and middleware injections</li>
</ul>
<p>In addition, I relied heavily on batched actions, where logic entry
points would stimulate multiple actions in one procedural chunk of
code.  Needless to say, this was less than ideal. Even tools like
redux-dev-tools could not give me adequate insight into &quot;what was
stimulating what&quot;!</p>
<p>All of these techniques were replaced with &quot;true&quot; business logic,
organizing all my logic in one isolated spot, all orchestrated by
redux-logic!</p>
<p>My business logic is now:</p>
<ul>
<li>located in one logical discipline (i.e. dedicated &quot;logic&quot; modules)</li>
<li>making it testable in isolation (very nice)!!</li>
<li>has more concise and succinct goals</li>
<li>promotes modular reuse</li>
<li>provides traceable &quot;cause and effects&quot;</li>
<li>is greatly simplified!</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="default.html" class="navigation navigation-prev " aria-label="Previous page: Defaulting Parameters">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="api.html" class="navigation navigation-next " aria-label="Next page: API Reference">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Thunk Action Creators","level":"2.1.6","depth":2,"next":{"title":"API Reference","level":"3.1","depth":1,"path":"api.md","ref":"api.md","articles":[{"title":"generateActions","level":"3.1.1","depth":2,"anchor":"#generateActions","path":"api.md","ref":"api.md#generateActions","articles":[]},{"title":"generateActions.root","level":"3.1.2","depth":2,"anchor":"#generateActions_root","path":"api.md","ref":"api.md#generateActions_root","articles":[]},{"title":"Meta Inputs ...","level":"3.1.3","depth":2,"ref":"","articles":[{"title":"ActionGenesis","level":"3.1.3.1","depth":3,"anchor":"#ActionGenesis","path":"api.md","ref":"api.md#ActionGenesis","articles":[]},{"title":"ActionMeta","level":"3.1.3.2","depth":3,"anchor":"#ActionMeta","path":"api.md","ref":"api.md#ActionMeta","articles":[]},{"title":"ratifyFn","level":"3.1.3.3","depth":3,"anchor":"#ratifyFn","path":"api.md","ref":"api.md#ratifyFn","articles":[]}]},{"title":"Run-Time Outputs ...","level":"3.1.4","depth":2,"ref":"","articles":[{"title":"ActionStruct","level":"3.1.4.1","depth":3,"anchor":"#ActionStruct","path":"api.md","ref":"api.md#ActionStruct","articles":[]},{"title":"ActionNode","level":"3.1.4.2","depth":3,"anchor":"#ActionNode","path":"api.md","ref":"api.md#ActionNode","articles":[]}]}]},"previous":{"title":"Defaulting Parameters","level":"2.1.5","depth":2,"path":"default.md","ref":"default.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-livereload","toolbar","livereload"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["twitter","facebook","google","weibo","instapaper"]},"toolbar":{"buttons":[{"label":"GitHub","icon":"fa fa-github","url":"https://github.com/KevinAst/action-u"},{"label":"NPM","icon":"fa fa-bullseye","url":"https://www.npmjs.com/package/action-u"}]},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Kevin J. Bridges <kevinast@gmail.com> (https://github.com/KevinAst)","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"intro.md","glossary":"GLOSSARY.md","summary":"toc.md"},"variables":{"guide":{"LICENSE":"[`MIT License`](/LICENSE.md)","default":"[`Defaulting Parameters`](/default.md)","start":"[`Getting Started`](/start.md)","actionDoc":"[`Action Documentation`](/actionDoc.md)","promotion":"[`Action Promotion`](/promotion.md)","basics":"[`Basics`](/basics.md)","dist":"[`Distribution`](/dist.md)","devGuide":"[**Dev Guide**](/index.html)","why":"[`Why action-u?`](/why.md)","formalTypes":"[`A Closer Look`](/formalTypes.md)","shapes":"[`ActionStruct Shapes`](/shapes.md)","history":"[`Revision History`](/history.md)","thunks":"[`Thunk Action Creators`](/thunks.md)","validation":"[`Parameter Validation`](/validation.md)"},"api":{"generateActionsDOTroot":"[`generateActions.root()`](/api.md#generateActions_root)","actionMetaDOTratify":"[`actionMeta.ratify`](/api.md#ActionMeta)","generateActions":"[`generateActions()`](/api.md#generateActions)","ActionStruct":"[`ActionStruct`](/api.md#ActionStruct)","actionMetaDOTthunk":"[`actionMeta.thunk`](/api.md#ActionMeta)","ActionGenesis":"[`ActionGenesis`](/api.md#ActionGenesis)","actionGenesis":"[`actionGenesis`](/api.md#ActionGenesis)","ref":"[`API Reference`](/api.md)","actionMetaDOTtraits":"[`actionMeta.traits`](/api.md#ActionMeta)","ActionNode":"[`ActionNode`](/api.md#ActionNode)","actionMeta":"[`actionMeta`](/api.md#ActionMeta)","ActionMeta":"[`ActionMeta`](/api.md#ActionMeta)","ActionNodes":"[`ActionNodes`](/api.md#ActionNode)","ratifyFn":"[`ratifyFn()`](/api.md#ratifyFn)"},"ext":{"redux":"[`redux`](http://redux.js.org/)","actions":"[`actions`](http://redux.js.org/docs/basics/Actions.html)","actionCreator":"[`action creator`](http://redux.js.org/docs/basics/Actions.html#action-creators)","actionCreators":"[`action creators`](http://redux.js.org/docs/basics/Actions.html#action-creators)"}},"title":"action-u","gitbook":"3.2.2","description":"Redux Action Generator (promoting action creators and types)"},"file":{"path":"thunks.md","mtime":"2017-05-30T12:34:02.261Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-05-30T17:10:09.314Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-toolbar/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

